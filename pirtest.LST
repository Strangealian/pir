A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 14:26:44 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN pirtest.OBJ
ASSEMBLER INVOKED BY: E:\Program Files\C51\BIN\A51.EXE pirtest.asm SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

0000                   1     DEF:
  0060                 2         LOOPTAG EQU 60H;Ê¨°Êï∞ÁªüËÆ°‰øùÂ≠òÂú∞ÂùÄ
  0059                 3         LOOPTIME EQU 59H;Âª∂Êó∂Âæ™ÁéØÊ¨°Êï∞‰øùÂ≠òÂú∞ÂùÄ
  0058                 4         OFFSET1 EQU 58H;‰∏™‰ΩçÂÅèÁßªÂú∞ÂùÄËÆ∞ÂΩï
  0057                 5         OFFSET2 EQU 57H;ÂçÅ‰ΩçÂÅèÁßªÂú∞ÂùÄËÆ∞ÂΩï
  0056                 6         BALANCE EQU 56H;Ë¥üËΩΩ ÂùáË°°Ê†áËÆ∞
  0055                 7         DEFAULTDT EQU 55H;
  00D8                 8         THT EQU 0D8H;ËÆ°Êï∞Âô®È´òÂ≠óËäÇ
  00F0                 9         TLT EQU 0F0H;ËÆ°Êï∞Âô®‰ΩéÂ≠óËäÇ
                      10     
  0054                11         KEYBUF1 EQU 54H;ÈîÆÁõòËØªÂÖ•Êï∞ÊçÆÂçÅ‰Ωç
  0053                12         KEYBUF2 EQU 53H;ÈîÆÁõòËØªÂÖ•Êï∞ÊçÆ‰∏™‰ΩçÔºõ
  0052                13         KEYBUF3 EQU 52H;
  0051                14         ADJUSTFLAG EQU 51H;
                      15     
0000                  16         ORG 0000H;
0000 0160             17         AJMP MAIN;
000B                  18         ORG 000BH;T0Ê∫¢Âá∫‰∏≠Êñ≠ÂÖ•Âè£Âú∞ÂùÄ
000B 01F9             19         AJMP DELAY;
0013                  20         ORG 0013H;
0013 2156             21         AJMP KBSCN;
0060                  22         ORG 0060H;
                      23         ;!!!!JNZÈúÄË¶ÅÊõ¥Êîπ JNZ ÊòØ‰∏∫‰∫ÜÊµãËØï
                      24     
                      25     
0060                  26     MAIN:
0060 758160           27         MOV SP,#60H;
                      28         
0063 75580A           29         MOV OFFSET1,#0AH;
0066 755703           30         MOV OFFSET2,#03H;
0069 75551E           31         MOV DEFAULTDT,#30;
006C 755905           32         MOV LOOPTIME,#05H;
006F 755101           33         MOV ADJUSTFLAG,#1;
0072 755300           34         MOV KEYBUF2,#00H;
0075 D2AF             35         SETB EA;
0077 D2AA             36             SETB EX1;
0079 D28A             37             SETB IT1;
                      38         
007B D2BA             39         SETB PX1;
007D                  40         LOOP:
007D 756000           41             MOV LOOPTAG,#00H;
0080 7556FF           42             MOV BALANCE,#0FFH;
0083 755101           43             MOV ADJUSTFLAG,#1;
                      44     
0086 7590FF           45             MOV P1,#0FFH;p1‰∏∫Êï∞ÊçÆËæìÂá∫ÔºåÁÇπ‰∫ÆLEDÁî®
0089 7580FF           46             MOV P0,#0FFH;
008C 75B00F           47             MOV P3,#0FH;p3‰∏∫ÈîÆÁõòËæìÂÖ•Âè£
008F 75A0FF           48             MOV P2,#0FFH;p2‰Ωú‰∏∫Êï∞ÊçÆËæìÂÖ•Âè£
                      49     
                      50     
0092 E5A0             51             MOV A,P2;
0094 5407             52             ANL A,#07H; 0  Êà™Âèñ‰∏â‰ΩçËæìÂÖ•‰ø°Âè∑ÔºåÂè™ÊúâËæìÂÖ•‰ø°Âè∑ÊòØ0Ôºå2Ôºå4ÊâçÁÇπ‰∫Æ
0096 FF               53             MOV R7,A;ÊöÇÂ≠ò
0097 700B             54             JNZ LIGHT;
0099 5405             55             ANL A,#05H;Â¶ÇÊûú‰∏çÊòØ0ÂàôÊà™ÂèñÂá∫‰∏â‰ΩçÔºå‰∏é101ÔºåÂ¶ÇÊûú‰∏∫0ËØ¥Êòé‰∏∫2ÔºõÁÇπ‰∫Æ
009B 7007             56             JNZ LIGHT;
009D EF               57             MOV A,R7;Â¶ÇÊûú‰∏çÊòØ0 ÊÅ¢Â§çAÈáåÈù¢ÁöÑÊï∞ÊçÆ
009E 5403             58             ANL A,#03H;Â¶ÇÊûú‰πü‰∏çÊòØ2Ôºå‰∏é011ÔºåÂ¶ÇÊûú‰∏∫0ËØ¥Êòé‰∏∫4ÔºåÁÇπ‰∫Æ
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 14:26:44 PAGE     2

00A0 7002             59             JNZ LIGHT;
00A2 017D             60             AJMP LOOP;
                      61     
00A4                  62         LIGHT:
00A4 B290             63             CPL P1.0;
00A6 00               64             NOP;
00A7 00               65             NOP;
00A8 AD55             66             MOV R5,DEFAULTDT;
00AA AA57             67             MOV R2,OFFSET2;Â≠òÊîæÊï∞Á†ÅÁÆ°ÂçÅ‰ΩçÂØπÂ∫îÂÅèÁßªÂú∞ÂùÄ
00AC E551             68             MOV A,ADJUSTFLAG;
00AE B40004           69             CJNE A,#0,ADJUST;
00B1 AB58             70             MOV R3,OFFSET1;Â≠òÊîæÊï∞Á†ÅÁÆ°‰∏™‰ΩçÂØπÂ∫îÂÅèÁßªÂú∞ÂùÄ
                      71             
00B3 01C2             72             AJMP LIGHTTIME;
00B5                  73             ADJUST:
00B5 E553             74                 MOV A,KEYBUF2;
00B7 B40004           75                 CJNE A,#00H,ADJUST1;
00BA AB58             76                 MOV R3,OFFSET1;
00BC 01C2             77                 AJMP LIGHTTIME;
00BE                  78                 ADJUST1:
00BE FB               79                 MOV R3,A;
00BF 755100           80                 MOV ADJUSTFLAG,#0;
                      81     
00C2                  82             LIGHTTIME:
00C2 1200D7           83                 LCALL DELAY1S;Âª∂Êó∂1sÂêéÊï∞Á†ÅÁÆ°ÊòæÁ§∫Áõ∏Â∫îÊï∞Â≠ó
00C5 1B               84                 DEC R3;
00C6 7400             85                 MOV A,#00H;
00C8 B50301           86                 CJNE A,03H,CFG;
00CB 1A               87                 DEC R2;
00CC                  88             CFG:
00CC BB0002           89                 CJNE R3,#00H,ASGTO;
00CF AB58             90                 MOV R3,OFFSET1;
00D1                  91             ASGTO:
00D1 DDEF             92                 DJNZ R5,LIGHTTIME;
00D3 B290             93                 CPL P1.0;
00D5 017D             94                 AJMP LOOP;
                      95     
                      96     ;Âª∂Êó∂1sÂ≠êÁ®ãÂ∫è
00D7                  97     DELAY1S:
00D7 C0D0             98             PUSH PSW;
00D9 C0E0             99             PUSH ACC;
00DB 01DD            100             AJMP DELAY50MS;
                     101         ;Âª∂Êó∂50msÂ≠êÁ®ãÂ∫è 65536-50000=15536=3CB0
00DD                 102         DELAY50MS:
00DD 758901          103             MOV TMOD,#01H;ËÆ°Êï∞Âô®1Â∑•‰Ωú‰∫éÊñπÂºè1
00E0 758CD8          104             MOV TH0,#THT;Âä†‰∏ÄËÆ°Êï∞Âô®È´òÂ≠óËäÇ
00E3 758AF0          105             MOV TL0,#TLT;Âä†‰∏ÄËÆ°Êï∞Âô®‰ΩéÂ≠óËäÇ
00E6 D2AF            106             SETB EA;
00E8 D28C            107             SETB TR0;
00EA D2A9            108             SETB ET0;
                     109             
00EC                 110         TIMEOUT:  
                     111         
                     112     
00EC AE60            113             MOV R6,LOOPTAG;
                     114     
00EE BE64FB          115             CJNE R6,#64H,TIMEOUT;
00F1 756000          116             MOV LOOPTAG,#00H;
00F4 D0E0            117             POP ACC;
00F6 D0D0            118             POP PSW;
00F8 22              119             RET;
                     120     
                     121     
                     122     
                     123     
                     124     
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 14:26:44 PAGE     3

00F9                 125     DELAY:;ËÆ°Êï∞Âô®1Ê∫¢Âá∫‰∏≠Êñ≠Âá∫Âè£
00F9 C0D0            126             PUSH PSW;
00FB C0E0            127             PUSH ACC;
00FD AE60            128             MOV R6,LOOPTAG;
00FF 0E              129             INC R6;
0100 8E60            130             MOV LOOPTAG,R6;
0102 758CD8          131             MOV TH0,#THT;Âä†‰∏ÄËÆ°Êï∞Âô®È´òÂ≠óËäÇ
0105 758AF0          132             MOV TL0,#TLT;Âä†‰∏ÄËÆ°Êï∞Âô®‰ΩéÂ≠óËäÇ
                     133     
                     134             
                     135             ;ÁÇπ‰∫ÆÊï∞Á†ÅÁÆ°
0108                 136         NUMDIS:
                     137         
                     138             
0108 EE              139             MOV A,R6;
0109 5401            140             ANL A,#01H;
010B F556            141             MOV BALANCE,A;Ë¥üËΩΩÂùáË°°
010D 701A            142             JNZ BAL2;
010F                 143         BAL1:
010F 7CFD            144             MOV R4,#0FDH;R4Â≠òÊîæÊï∞Á†ÅÁÆ°‰ΩçÁΩÆ‰∏™‰Ωç
                     145             
                     146             ;MOV R3,A;
0111 C2A6            147             CLR P2.6;‰ΩçÈÄâÈÄâ‰∏≠‰∏™‰Ωç
0113 D2A7            148             SETB P2.7;
                     149             ;MOV P0,#0FFH;
0115 8C80            150             MOV P0,R4;
0117 C2A7            151             CLR P2.7;
                     152     
0119 900318          153             MOV DPTR,#TIMETAB;
011C EB              154             MOV A,R3;
011D 93              155             MOVC A,@A+DPTR;Êü•Ë°®ÂæóÂà∞Áõ∏Â∫îÊï∞Â≠óÂØπÂ∫îÂÄº
011E D2A6            156             SETB P2.6;
0120 758000          157             MOV P0,#00H;
0123 F580            158             MOV P0,A;
0125 E556            159             MOV A,BALANCE;
0127 701A            160             JNZ BAL3;
                     161             ;LCALL PWNWAT;Âª∂Êó∂1ms
                     162             ;LCALL PWNWAT;
                     163             
0129                 164         BAL2:
0129 7CFE            165             MOV R4,#0FEH;
                     166         
012B 900318          167             MOV DPTR, #TIMETAB;
012E EA              168             MOV A,R2;
012F 93              169             MOVC A,@A+DPTR;
                     170             ;CALL PWNWAT;
0130 C2A6            171             CLR P2.6;
0132 D2A7            172             SETB P2.7;
                     173             ;MOV P0,#0FFH;
0134 8C80            174             MOV P0,R4;
0136 C2A7            175             CLR P2.7;
0138 D2A6            176             SETB P2.6;
013A 758000          177             MOV P0,#00H;
013D F580            178             MOV P0,A;
013F E556            179             MOV A,BALANCE;
0141 70CC            180             JNZ BAL1;
                     181             ;LCALL PWNWAT;
0143                 182         BAL3:
0143 BE640B          183             CJNE R6,#64H,BREAK;
0146 C2A6            184             CLR P2.6;
0148 C2AB            185             CLR ET1;
014A C28E            186             CLR TR1;
014C C2AF            187             CLR EA;
014E 758900          188             MOV TMOD,#00H;
                     189             ;MOV 60H,#00H;
                     190             
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 14:26:44 PAGE     4

0151                 191         BREAK:
0151 D0E0            192             POP ACC;
0153 D0D0            193             POP PSW;
0155 32              194             RETI;
                     195     
                     196     
                     197     
                     198     
                     199     
                     200     
0156                 201     KBSCN:
                     202     
0156 B297            203             CPL P1.7;
                     204             
0158 755403          205             MOV KEYBUF1,#03H;
015B 755300          206             MOV KEYBUF2,#00H;
015E 75551E          207             MOV DEFAULTDT,#30;
                     208             
0161                 209         WAT4RLS:;WAITE FOR REALSE
0161 E5B0            210             MOV A,P3;
0163 540F            211             ANL A,#0FH;
0165 640F            212             XRL A,#0FH;
0167 70F8            213             JNZ WAT4RLS;
                     214     
                     215     
                     216     
0169 C0D0            217             PUSH PSW;
016B C0E0            218             PUSH ACC;
016D D2D3            219             SETB RS0;USE THE SECOND SET OF REGISTERS;
016F C28A            220             CLR IT1;
0171 7900            221             MOV R1,#0;R1Áî®‰ΩúÊ†áÂøóÔºåÁî®Êù•Ê†áËÆ∞Êï∞ÊçÆÂ∫îËØ•Â≠òÂÖ•Âì™‰∏™buf„ÄÇ
0173                 222         KBSCNR1:
0173 75B0FF          223             MOV P3,#0FFH;
0176 C2B4            224             CLR P3.4;
0178 E5B0            225             MOV A,P3;
017A 540F            226             ANL A,#0FH;
017C 640F            227             XRL A,#0FH;
017E 6016            228             JZ KBSCNR2;
0180 51F8            229             CALL DELAY4KBD;
                     230     
0182 E5B0            231             MOV A,P3;
0184 540F            232             ANL A,#0FH;
0186 640F            233             XRL A,#0FH;
0188 600C            234             JZ KBSCNR2;
018A                 235         C11:
018A 00              236             NOP;
018B                 237         C12:
018B 00              238             NOP;
018C                 239         C13:
018C 00              240             NOP;
018D                 241         C14:
018D 00              242             NOP;
                     243     
018E                 244         WAT4RLS1:;WAITE FOR REALSE
018E E5B0            245             MOV A,P3;
0190 540F            246             ANL A,#0FH;
0192 640F            247             XRL A,#0FH;
0194 70F8            248             JNZ WAT4RLS1;
                     249     
0196                 250         KBSCNR2:
0196 75B0FF          251             MOV P3,#0FFH;
0199 C2B5            252             CLR P3.5;
019B E5B0            253             MOV A,P3;
019D 540F            254             ANL A,#0FH;
019F 640F            255             XRL A,#0FH;
01A1 6055            256             JZ KBSCNR3;
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 14:26:44 PAGE     5

01A3 51F8            257             CALL DELAY4KBD;
                     258     
01A5 E5B0            259             MOV A,P3;
01A7 540F            260             ANL A,#0FH;
01A9 640F            261             XRL A,#0FH;
01AB 604B            262             JZ KBSCNR3;
                     263     
01AD                 264         C21:
01AD B40113          265             CJNE A,#01H,C22;0001Â∑¶‰∏äËßíË¢´Êåâ‰∏ã
01B0 B90009          266             CJNE R1,#0,C21BUF2;
01B3 755407          267             MOV KEYBUF1,#07H;
01B6 B290            268             CPL P1.0;
01B8 7901            269             MOV R1,#1;
01BA 21F0            270             AJMP WAT4RLS2;
01BC                 271         C21BUF2:
01BC 755307          272             MOV KEYBUF2,#07H;
01BF 7900            273             MOV R1,#0;
01C1 21F0            274             AJMP WAT4RLS2;
01C3                 275         C22:
01C3 B40211          276             CJNE A,#02H,C23;
01C6 B90007          277             CJNE R1,#0,C22BUF2;
01C9 755404          278             MOV KEYBUF1,#04H;
01CC 7901            279             MOV R1,#1;
01CE 21F0            280             AJMP WAT4RLS2;
01D0                 281         C22BUF2:
01D0 755304          282             MOV KEYBUF2,#04H;
01D3 7900            283             MOV R1,#0;
01D5 21F0            284             AJMP WAT4RLS2;
01D7                 285         C23:
01D7 B40411          286             CJNE A,#04H,C24;
01DA B90007          287             CJNE R1,#0,C23BUF2;
01DD 755401          288             MOV KEYBUF1,#01H;
01E0 7901            289             MOV R1,#1;
01E2 21F0            290             AJMP WAT4RLS2;
01E4                 291         C23BUF2:
01E4 755301          292             MOV KEYBUF2,#01H;
01E7 7900            293             MOV R1,#0;
01E9 21F0            294             AJMP WAT4RLS2;
01EB                 295         C24:
01EB B40802          296             CJNE A,#08H,WAT4RLS2;
                     297             ;MOV KEYBUF1,#0FFH;
01EE 41C6            298             AJMP EXITSET;
                     299     
01F0                 300         WAT4RLS2:;WAITE FOR REALSE
01F0 E5B0            301             MOV A,P3;
01F2 540F            302             ANL A,#0FH;
01F4 640F            303             XRL A,#0FH;
01F6 70F8            304             JNZ WAT4RLS2;
                     305     
                     306     
                     307     
                     308     
01F8                 309         KBSCNR3:
01F8 75B0FF          310             MOV P3,#0FFH;
01FB C2B6            311             CLR P3.6;
01FD E5B0            312             MOV A,P3;
01FF 540F            313             ANL A,#0FH;
0201 640F            314             XRL A,#0FH;
0203 6060            315             JZ KBSCNR4;
0205 51F8            316             CALL DELAY4KBD;
                     317     
0207 E5B0            318             MOV A,P3;
0209 540F            319             ANL A,#0FH;
020B 640F            320             XRL A,#0FH;
020D 6056            321             JZ KBSCNR4;
                     322     
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 14:26:44 PAGE     6

020F                 323         C31:
020F B40111          324             CJNE A,#01H,C32;0001Â∑¶‰∏äËßíË¢´Êåâ‰∏ã
0212 B90007          325             CJNE R1,#0,C31BUF2;
0215 755408          326             MOV KEYBUF1,#08H;
0218 7901            327             MOV R1,#1;
021A 415D            328             AJMP WAT4RLS3;
021C                 329         C31BUF2:
021C 755308          330             MOV KEYBUF2,#08H;
021F 7900            331             MOV R1,#0;
0221 415D            332             AJMP WAT4RLS3;
0223                 333         C32:
0223 B40211          334             CJNE A,#02H,C33;
0226 B90007          335             CJNE R1,#0,C32BUF2;
0229 755405          336             MOV KEYBUF1,#05H;
022C 7901            337             MOV R1,#1;
022E 415D            338             AJMP WAT4RLS3;
0230                 339         C32BUF2:
0230 755305          340             MOV KEYBUF2,#05H;
0233 7900            341             MOV R1,#0;
0235 415D            342             AJMP WAT4RLS3;
0237                 343         C33:
0237 B40411          344             CJNE A,#04H,C34;
023A B90007          345             CJNE R1,#0,C33BUF2;
023D 755402          346             MOV KEYBUF1,#02H;
0240 7901            347             MOV R1,#1;
0242 415D            348             AJMP WAT4RLS3;
0244                 349         C33BUF2:
0244 755302          350             MOV KEYBUF2,#02H;
0247 7900            351             MOV R1,#0;
0249 415D            352             AJMP WAT4RLS3;
024B                 353         C34:
024B B408A2          354             CJNE A,#08H,WAT4RLS2;
024E B90007          355             CJNE R1,#0,C34BUF2;
0251 755400          356             MOV KEYBUF1,#00H;
0254 7901            357             MOV R1,#1;
0256 415D            358             AJMP WAT4RLS3;
0258                 359         C34BUF2:
0258 755300          360             MOV KEYBUF2,#00H;
025B 7900            361             MOV R1,#0;
                     362     
025D                 363         WAT4RLS3:;WAITE FOR REALSE
025D E5B0            364             MOV A,P3;
025F 540F            365             ANL A,#0FH;
0261 640F            366             XRL A,#0FH;
0263 70F8            367             JNZ WAT4RLS3;
                     368     
0265                 369         KBSCNR4:
0265 75B0FF          370             MOV P3,#0FFH;
0268 C2B7            371             CLR P3.7;
026A E5B0            372             MOV A,P3;
026C 540F            373             ANL A,#0FH;
026E 640F            374             XRL A,#0FH;
0270 6052            375             JZ KBSCNEND;
0272 51F8            376             CALL DELAY4KBD;
                     377     
0274 E5B0            378             MOV A,P3;
0276 540F            379             ANL A,#0FH;
0278 640F            380             XRL A,#0FH;
027A 6048            381             JZ KBSCNEND;
                     382     
027C                 383         C41:
027C B40111          384             CJNE A,#01H,C42;0001Â∑¶‰∏äËßíË¢´Êåâ‰∏ã
027F B90007          385             CJNE R1,#0,C41BUF2;
0282 755409          386             MOV KEYBUF1,#09H;
0285 7901            387             MOV R1,#1;
0287 41BC            388             AJMP WAT4RLS4;
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 14:26:44 PAGE     7

0289                 389         C41BUF2:
0289 755309          390             MOV KEYBUF2,#09H;
028C 7900            391             MOV R1,#0;
028E 41BC            392             AJMP WAT4RLS4;
0290                 393         C42:
0290 B40211          394             CJNE A,#02H,C43;
0293 B90007          395             CJNE R1,#0,C42BUF2;
0296 755406          396             MOV KEYBUF1,#06H;
0299 7901            397             MOV R1,#1;
029B 41BC            398             AJMP WAT4RLS4;
029D                 399         C42BUF2:
029D 755306          400             MOV KEYBUF2,#06H;
02A0 7900            401             MOV R1,#0;
02A2 41BC            402             AJMP WAT4RLS4;
02A4                 403         C43:
02A4 B40411          404             CJNE A,#04H,C44;
02A7 B90007          405             CJNE R1,#0,C43BUF2;
02AA 755403          406             MOV KEYBUF1,#03H;
02AD 7901            407             MOV R1,#1;
02AF 41BC            408             AJMP WAT4RLS4;
02B1                 409         C43BUF2:
02B1 755303          410             MOV KEYBUF2,#03H;
02B4 7900            411             MOV R1,#0;
02B6 41BC            412             AJMP WAT4RLS4;
02B8                 413         C44:
02B8 B40801          414             CJNE A,#08H,WAT4RLS4;
02BB 00              415             NOP;
                     416     
02BC                 417         WAT4RLS4:;WAITE FOR REALSE
02BC E5B0            418             MOV A,P3;
02BE 540F            419             ANL A,#0FH;
02C0 640F            420             XRL A,#0FH;
02C2 70F8            421             JNZ WAT4RLS4;
                     422     
                     423     
                     424     
02C4                 425         KBSCNEND:
                     426     
02C4 2173            427             AJMP KBSCNR1;
02C6                 428         EXITSET:
02C6 B297            429             CPL P1.7;
                     430             ;CPL P1.1;
                     431         
02C8                 432         WAT4EXIT:;WAITE FOR REALSE
02C8 E5B0            433             MOV A,P3;
02CA 540F            434             ANL A,#0FH;
02CC 640F            435             XRL A,#0FH;
02CE 70F8            436             JNZ WAT4EXIT;
                     437     
                     438             
                     439     
                     440     
                     441     
                     442     
02D0 E554            443             MOV A,KEYBUF1;
02D2 75F00A          444             MOV B,#10;
02D5 A4              445             MUL AB;
02D6 2553            446             ADD A,KEYBUF2;
02D8 F552            447             MOV KEYBUF3,A;
                     448     
02DA C2D3            449             CLR RS0;USE THE DEFAULT SET OF REGISTERS;
02DC D0E0            450             POP ACC;
02DE D0D0            451             POP PSW;
                     452     
                     453             ;MOV OFFSET1,KEYBUF2;
                     454             ;INC OFFSET1;
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 14:26:44 PAGE     8

02E0 855457          455             MOV OFFSET2,KEYBUF1;
                     456             
                     457     
                     458     
                     459     
                     460     
                     461     
02E3 AC53            462             MOV R4,KEYBUF2;
02E5 BC0005          463             CJNE R4,#00H,NDINC;
02E8 855255          464             MOV DEFAULTDT,KEYBUF3;
02EB 41F2            465             AJMP NDINCBK;
02ED                 466             NDINC:
                     467             ;MOV R5,KEYBUF3;
02ED 0557            468             INC OFFSET2;‰∏∫‰ªÄ‰πàË¶ÅÂä†1ÔºåÂõ†‰∏∫Â≠òÊîæÊï∞Á†ÅÁÆ°ÂØπÂ∫î16ËøõÂà∂ÁöÑË°®ÊúÄÂâçÈù¢Â§
                             öÂä†‰∫Ü‰∏Ä‰∏™00H;
02EF 855255          469             MOV DEFAULTDT,KEYBUF3;
02F2                 470             NDINCBK:
                     471     
02F2 D28A            472             SETB IT1;
02F4 75B00F          473             MOV P3,#0FH;
02F7 32              474             RETI;
                     475     
                     476     
02F8                 477         DELAY4KBD:
02F8 7E0A            478             MOV R6,#10
02FA                 479         D1:        
02FA 7FF8            480             MOV R7,#248
02FC DFFE            481             DJNZ R7,$
02FE DEFA            482             DJNZ R6,D1
0300 22              483             RET
                     484     
                     485     
                     486     
                     487     
                     488     
                     489     
                     490     
0301                 491     PWNWAT: ;power on wait
0301 C0D0            492             PUSH PSW;
0303 C0E0            493             PUSH ACC;
0305 D2D3            494             SETB RS0;
0307 7928            495             MOV R1,#40;
0309 7A0A            496             MOV R2,#10;
030B                 497         PW1:
030B 00              498             NOP;
030C 00              499             NOP;
030D D9FC            500             DJNZ R1,PW1;
030F 7928            501             MOV R1,#40;
0311 DAF8            502             DJNZ R2,PW1;
0313 D0E0            503             POP ACC;
0315 D0D0            504             POP PSW;
0317 22              505             RET;
                     506     
                     507     
0318                 508     TIMETAB:
0318 003F065B        509         DB 00H,3FH,06H,5BH;
031C 4F666D7D        510         DB 4FH,66H,6DH,7DH;
0320 077F6F          511         DB 07H,7FH,6FH;
                     512         ;DB 6FH,7FH,07H,7DH;
                     513         ;DB 6DH,66H,4FH,5BH;
                     514         ;DB 06H,3FH;
                     515     END;
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 14:26:44 PAGE     9

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

ACC. . . . . . . .  D ADDR   00E0H   A   
ADJUST . . . . . .  C ADDR   00B5H   A   
ADJUST1. . . . . .  C ADDR   00BEH   A   
ADJUSTFLAG . . . .  N NUMB   0051H   A   
ASGTO. . . . . . .  C ADDR   00D1H   A   
B. . . . . . . . .  D ADDR   00F0H   A   
BAL1 . . . . . . .  C ADDR   010FH   A   
BAL2 . . . . . . .  C ADDR   0129H   A   
BAL3 . . . . . . .  C ADDR   0143H   A   
BALANCE. . . . . .  N NUMB   0056H   A   
BREAK. . . . . . .  C ADDR   0151H   A   
C11. . . . . . . .  C ADDR   018AH   A   
C12. . . . . . . .  C ADDR   018BH   A   
C13. . . . . . . .  C ADDR   018CH   A   
C14. . . . . . . .  C ADDR   018DH   A   
C21. . . . . . . .  C ADDR   01ADH   A   
C21BUF2. . . . . .  C ADDR   01BCH   A   
C22. . . . . . . .  C ADDR   01C3H   A   
C22BUF2. . . . . .  C ADDR   01D0H   A   
C23. . . . . . . .  C ADDR   01D7H   A   
C23BUF2. . . . . .  C ADDR   01E4H   A   
C24. . . . . . . .  C ADDR   01EBH   A   
C31. . . . . . . .  C ADDR   020FH   A   
C31BUF2. . . . . .  C ADDR   021CH   A   
C32. . . . . . . .  C ADDR   0223H   A   
C32BUF2. . . . . .  C ADDR   0230H   A   
C33. . . . . . . .  C ADDR   0237H   A   
C33BUF2. . . . . .  C ADDR   0244H   A   
C34. . . . . . . .  C ADDR   024BH   A   
C34BUF2. . . . . .  C ADDR   0258H   A   
C41. . . . . . . .  C ADDR   027CH   A   
C41BUF2. . . . . .  C ADDR   0289H   A   
C42. . . . . . . .  C ADDR   0290H   A   
C42BUF2. . . . . .  C ADDR   029DH   A   
C43. . . . . . . .  C ADDR   02A4H   A   
C43BUF2. . . . . .  C ADDR   02B1H   A   
C44. . . . . . . .  C ADDR   02B8H   A   
CFG. . . . . . . .  C ADDR   00CCH   A   
D1 . . . . . . . .  C ADDR   02FAH   A   
DEF. . . . . . . .  C ADDR   0000H   A   
DEFAULTDT. . . . .  N NUMB   0055H   A   
DELAY. . . . . . .  C ADDR   00F9H   A   
DELAY1S. . . . . .  C ADDR   00D7H   A   
DELAY4KBD. . . . .  C ADDR   02F8H   A   
DELAY50MS. . . . .  C ADDR   00DDH   A   
EA . . . . . . . .  B ADDR   00A8H.7 A   
ET0. . . . . . . .  B ADDR   00A8H.1 A   
ET1. . . . . . . .  B ADDR   00A8H.3 A   
EX1. . . . . . . .  B ADDR   00A8H.2 A   
EXITSET. . . . . .  C ADDR   02C6H   A   
IT1. . . . . . . .  B ADDR   0088H.2 A   
KBSCN. . . . . . .  C ADDR   0156H   A   
KBSCNEND . . . . .  C ADDR   02C4H   A   
KBSCNR1. . . . . .  C ADDR   0173H   A   
KBSCNR2. . . . . .  C ADDR   0196H   A   
KBSCNR3. . . . . .  C ADDR   01F8H   A   
KBSCNR4. . . . . .  C ADDR   0265H   A   
KEYBUF1. . . . . .  N NUMB   0054H   A   
KEYBUF2. . . . . .  N NUMB   0053H   A   
KEYBUF3. . . . . .  N NUMB   0052H   A   
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 14:26:44 PAGE    10

LIGHT. . . . . . .  C ADDR   00A4H   A   
LIGHTTIME. . . . .  C ADDR   00C2H   A   
LOOP . . . . . . .  C ADDR   007DH   A   
LOOPTAG. . . . . .  N NUMB   0060H   A   
LOOPTIME . . . . .  N NUMB   0059H   A   
MAIN . . . . . . .  C ADDR   0060H   A   
NDINC. . . . . . .  C ADDR   02EDH   A   
NDINCBK. . . . . .  C ADDR   02F2H   A   
NUMDIS . . . . . .  C ADDR   0108H   A   
OFFSET1. . . . . .  N NUMB   0058H   A   
OFFSET2. . . . . .  N NUMB   0057H   A   
P0 . . . . . . . .  D ADDR   0080H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
P3 . . . . . . . .  D ADDR   00B0H   A   
PSW. . . . . . . .  D ADDR   00D0H   A   
PW1. . . . . . . .  C ADDR   030BH   A   
PWNWAT . . . . . .  C ADDR   0301H   A   
PX1. . . . . . . .  B ADDR   00B8H.2 A   
RS0. . . . . . . .  B ADDR   00D0H.3 A   
SP . . . . . . . .  D ADDR   0081H   A   
TH0. . . . . . . .  D ADDR   008CH   A   
THT. . . . . . . .  N NUMB   00D8H   A   
TIMEOUT. . . . . .  C ADDR   00ECH   A   
TIMETAB. . . . . .  C ADDR   0318H   A   
TL0. . . . . . . .  D ADDR   008AH   A   
TLT. . . . . . . .  N NUMB   00F0H   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . .  B ADDR   0088H.4 A   
TR1. . . . . . . .  B ADDR   0088H.6 A   
WAT4EXIT . . . . .  C ADDR   02C8H   A   
WAT4RLS. . . . . .  C ADDR   0161H   A   
WAT4RLS1 . . . . .  C ADDR   018EH   A   
WAT4RLS2 . . . . .  C ADDR   01F0H   A   
WAT4RLS3 . . . . .  C ADDR   025DH   A   
WAT4RLS4 . . . . .  C ADDR   02BCH   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
