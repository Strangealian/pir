A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 16:30:00 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN pirtest.OBJ
ASSEMBLER INVOKED BY: E:\Program Files\C51\BIN\A51.EXE pirtest.asm SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

0000                   1     DEF:
  0060                 2         LOOPTAG EQU 60H;Ê¨°Êï∞ÁªüËÆ°‰øùÂ≠òÂú∞ÂùÄ
  0059                 3         LOOPTIME EQU 59H;Âª∂Êó∂Âæ™ÁéØÊ¨°Êï∞‰øùÂ≠òÂú∞ÂùÄ
  0058                 4         OFFSET1 EQU 58H;‰∏™‰ΩçÂÅèÁßªÂú∞ÂùÄËÆ∞ÂΩï
  0057                 5         OFFSET2 EQU 57H;ÂçÅ‰ΩçÂÅèÁßªÂú∞ÂùÄËÆ∞ÂΩï
  0056                 6         BALANCE EQU 56H;Ë¥üËΩΩ ÂùáË°°Ê†áËÆ∞
  0055                 7         DEFAULTDT EQU 55H;
  00D8                 8         THT EQU 0D8H;ËÆ°Êï∞Âô®È´òÂ≠óËäÇ
  00F0                 9         TLT EQU 0F0H;ËÆ°Êï∞Âô®‰ΩéÂ≠óËäÇ
                      10     
  0054                11         KEYBUF1 EQU 54H;ÈîÆÁõòËØªÂÖ•Êï∞ÊçÆÂçÅ‰Ωç
  0053                12         KEYBUF2 EQU 53H;ÈîÆÁõòËØªÂÖ•Êï∞ÊçÆ‰∏™‰ΩçÔºõ
  0052                13         KEYBUF3 EQU 52H;
  0051                14         ADJUSTFLAG EQU 51H;
                      15     
0000                  16         ORG 0000H;
0000 0160             17         AJMP MAIN;
000B                  18         ORG 000BH;T0Ê∫¢Âá∫‰∏≠Êñ≠ÂÖ•Âè£Âú∞ÂùÄ
000B 01FA             19         AJMP DELAY;
0013                  20         ORG 0013H;
0013 2157             21         AJMP KBSCN;
0060                  22         ORG 0060H;
                      23         ;!!!!JNZÈúÄË¶ÅÊõ¥Êîπ JNZ ÊòØ‰∏∫‰∫ÜÊµãËØï
                      24     
                      25     
0060                  26     MAIN:
0060 758160           27         MOV SP,#60H;
                      28         
0063 75580A           29         MOV OFFSET1,#0AH;
0066 755703           30         MOV OFFSET2,#03H;
0069 75551E           31         MOV DEFAULTDT,#30;
006C 755905           32         MOV LOOPTIME,#05H;
006F 755101           33         MOV ADJUSTFLAG,#1;
0072 755300           34         MOV KEYBUF2,#00H;
0075 D2AF             35         SETB EA;
0077 D2AA             36             SETB EX1;
0079 D28A             37             SETB IT1;
                      38         
007B D2BA             39         SETB PX1;
                      40         
007D                  41         LOOP:
007D 756000           42             MOV LOOPTAG,#00H;
0080 7556FF           43             MOV BALANCE,#0FFH;
0083 755101           44             MOV ADJUSTFLAG,#1;
                      45     
0086 7590FF           46             MOV P1,#0FFH;p1‰∏∫Êï∞ÊçÆËæìÂá∫ÔºåÁÇπ‰∫ÆLEDÁî®
0089 7580FF           47             MOV P0,#0FFH;
008C 75B00F           48             MOV P3,#0FH;p3‰∏∫ÈîÆÁõòËæìÂÖ•Âè£
008F 75A0FF           49             MOV P2,#0FFH;p2‰Ωú‰∏∫Êï∞ÊçÆËæìÂÖ•Âè£
                      50     
0092 7F0A             51             MOV R7,#0AH;
                      52             ;DTCNSPDCNRL:;DETECTION SPEED CONTROL Ê£ÄÊµãÈÄüÂ∫¶ÊéßÂà∂ÔºåÊØèÁßí10Ê¨°
0094 1202F9           53                 LCALL DELAY4KBD;
                      54                 ;DJNZ R7,DTCNSPDCNRL;
                      55     
0097 E5A0             56             MOV A,P2;
0099 5407             57             ANL A,#07H; 0  Êà™Âèñ‰∏â‰ΩçËæìÂÖ•‰ø°Âè∑ÔºåÂè™ÊúâËæìÂÖ•‰ø°Âè∑ÊòØ0Ôºå2Ôºå4ÊâçÁÇπ‰∫Æ
                      58             ;MOV R7,A;ÊöÇÂ≠ò
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 16:30:00 PAGE     2

009B 6008             59             JZ LIGHT;‰∏∫0Áõ¥Êé•Ë∑≥ËΩ¨Âà∞ÁÇπ‰∫ÆledÔºõ
009D B40202           60             CJNE A,#02H,CMP4;
00A0 01A5             61             AJMP LIGHT;‰∏∫2ÔºåÁõ¥Êé•Ë∑≥ËΩ¨Âà∞LIGHT
00A2                  62             CMP4:
00A2 B404D8           63                 CJNE A,#04H,LOOP;‰∏∫4ÔºåÊâßË°åLIGHTÂê¶ÂàôËøîÂõûÁªßÁª≠ËØªÂèñP2Âè£
                      64     
00A5                  65         LIGHT:
00A5 B290             66             CPL P1.0;
00A7 00               67             NOP;
00A8 00               68             NOP;
00A9 AD55             69             MOV R5,DEFAULTDT;
00AB AA57             70             MOV R2,OFFSET2;Â≠òÊîæÊï∞Á†ÅÁÆ°ÂçÅ‰ΩçÂØπÂ∫îÂÅèÁßªÂú∞ÂùÄ
00AD E551             71             MOV A,ADJUSTFLAG;
00AF B40004           72             CJNE A,#0,ADJUST;
00B2 AB58             73             MOV R3,OFFSET1;Â≠òÊîæÊï∞Á†ÅÁÆ°‰∏™‰ΩçÂØπÂ∫îÂÅèÁßªÂú∞ÂùÄ
                      74             
00B4 01C3             75             AJMP LIGHTTIME;
00B6                  76             ADJUST:
00B6 E553             77                 MOV A,KEYBUF2;
00B8 B40004           78                 CJNE A,#00H,ADJUST1;
00BB AB58             79                 MOV R3,OFFSET1;
00BD 01C3             80                 AJMP LIGHTTIME;
00BF                  81                 ADJUST1:
00BF FB               82                 MOV R3,A;
00C0 755100           83                 MOV ADJUSTFLAG,#0;
                      84     
00C3                  85             LIGHTTIME:
00C3 1200D8           86                 LCALL DELAY1S;Âª∂Êó∂1sÂêéÊï∞Á†ÅÁÆ°ÊòæÁ§∫Áõ∏Â∫îÊï∞Â≠ó
00C6 1B               87                 DEC R3;
00C7 7400             88                 MOV A,#00H;
00C9 B50301           89                 CJNE A,03H,CFG;
00CC 1A               90                 DEC R2;
00CD                  91             CFG:
00CD BB0002           92                 CJNE R3,#00H,ASGTO;
00D0 AB58             93                 MOV R3,OFFSET1;
00D2                  94             ASGTO:
00D2 DDEF             95                 DJNZ R5,LIGHTTIME;
00D4 B290             96                 CPL P1.0;
00D6 017D             97                 AJMP LOOP;
                      98     
                      99     ;Âª∂Êó∂1sÂ≠êÁ®ãÂ∫è
00D8                 100     DELAY1S:
00D8 C0D0            101             PUSH PSW;
00DA C0E0            102             PUSH ACC;
00DC 01DE            103             AJMP DELAY50MS;
                     104         ;Âª∂Êó∂50msÂ≠êÁ®ãÂ∫è 65536-50000=15536=3CB0
00DE                 105         DELAY50MS:
00DE 758901          106             MOV TMOD,#01H;ËÆ°Êï∞Âô®1Â∑•‰Ωú‰∫éÊñπÂºè1
00E1 758CD8          107             MOV TH0,#THT;Âä†‰∏ÄËÆ°Êï∞Âô®È´òÂ≠óËäÇ
00E4 758AF0          108             MOV TL0,#TLT;Âä†‰∏ÄËÆ°Êï∞Âô®‰ΩéÂ≠óËäÇ
00E7 D2AF            109             SETB EA;
00E9 D28C            110             SETB TR0;
00EB D2A9            111             SETB ET0;
                     112             
00ED                 113         TIMEOUT:  
                     114         
                     115     
00ED AE60            116             MOV R6,LOOPTAG;
                     117     
00EF BE64FB          118             CJNE R6,#64H,TIMEOUT;
00F2 756000          119             MOV LOOPTAG,#00H;
00F5 D0E0            120             POP ACC;
00F7 D0D0            121             POP PSW;
00F9 22              122             RET;
                     123     
                     124     
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 16:30:00 PAGE     3

                     125     
                     126     
                     127     
00FA                 128     DELAY:;ËÆ°Êï∞Âô®1Ê∫¢Âá∫‰∏≠Êñ≠Âá∫Âè£
00FA C0D0            129             PUSH PSW;
00FC C0E0            130             PUSH ACC;
00FE AE60            131             MOV R6,LOOPTAG;
0100 0E              132             INC R6;
0101 8E60            133             MOV LOOPTAG,R6;
0103 758CD8          134             MOV TH0,#THT;Âä†‰∏ÄËÆ°Êï∞Âô®È´òÂ≠óËäÇ
0106 758AF0          135             MOV TL0,#TLT;Âä†‰∏ÄËÆ°Êï∞Âô®‰ΩéÂ≠óËäÇ
                     136     
                     137             
                     138             ;ÁÇπ‰∫ÆÊï∞Á†ÅÁÆ°
0109                 139         NUMDIS:
                     140         
                     141             
0109 EE              142             MOV A,R6;
010A 5401            143             ANL A,#01H;
010C F556            144             MOV BALANCE,A;Ë¥üËΩΩÂùáË°°
010E 701A            145             JNZ BAL2;
0110                 146         BAL1:
0110 7CFD            147             MOV R4,#0FDH;R4Â≠òÊîæÊï∞Á†ÅÁÆ°‰ΩçÁΩÆ‰∏™‰Ωç
                     148             
                     149             ;MOV R3,A;
0112 C2A6            150             CLR P2.6;‰ΩçÈÄâÈÄâ‰∏≠‰∏™‰Ωç
0114 D2A7            151             SETB P2.7;
                     152             ;MOV P0,#0FFH;
0116 8C80            153             MOV P0,R4;
0118 C2A7            154             CLR P2.7;
                     155     
011A 900319          156             MOV DPTR,#TIMETAB;
011D EB              157             MOV A,R3;
011E 93              158             MOVC A,@A+DPTR;Êü•Ë°®ÂæóÂà∞Áõ∏Â∫îÊï∞Â≠óÂØπÂ∫îÂÄº
011F D2A6            159             SETB P2.6;
0121 758000          160             MOV P0,#00H;
0124 F580            161             MOV P0,A;
0126 E556            162             MOV A,BALANCE;
0128 701A            163             JNZ BAL3;
                     164             ;LCALL PWNWAT;Âª∂Êó∂1ms
                     165             ;LCALL PWNWAT;
                     166             
012A                 167         BAL2:
012A 7CFE            168             MOV R4,#0FEH;
                     169         
012C 900319          170             MOV DPTR, #TIMETAB;
012F EA              171             MOV A,R2;
0130 93              172             MOVC A,@A+DPTR;
                     173             ;CALL PWNWAT;
0131 C2A6            174             CLR P2.6;
0133 D2A7            175             SETB P2.7;
                     176             ;MOV P0,#0FFH;
0135 8C80            177             MOV P0,R4;
0137 C2A7            178             CLR P2.7;
0139 D2A6            179             SETB P2.6;
013B 758000          180             MOV P0,#00H;
013E F580            181             MOV P0,A;
0140 E556            182             MOV A,BALANCE;
0142 70CC            183             JNZ BAL1;
                     184             ;LCALL PWNWAT;
0144                 185         BAL3:
0144 BE640B          186             CJNE R6,#64H,BREAK;
0147 C2A6            187             CLR P2.6;
0149 C2AB            188             CLR ET1;
014B C28E            189             CLR TR1;
014D C2AF            190             CLR EA;
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 16:30:00 PAGE     4

014F 758900          191             MOV TMOD,#00H;
                     192             ;MOV 60H,#00H;
                     193             
0152                 194         BREAK:
0152 D0E0            195             POP ACC;
0154 D0D0            196             POP PSW;
0156 32              197             RETI;
                     198     
                     199     
                     200     
                     201     
                     202     
                     203     
                     204     
                     205     
                     206     
                     207     
                     208     
                     209     
                     210     
                     211     
                     212     
                     213     
                     214     
                     215     
                     216     
0157                 217     KBSCN:
                     218     
0157 B297            219             CPL P1.7;p1.7‰∏∫ÈîÆÁõò‰∏≠Êñ≠Ê†áÂøóÔºåÁÅØ‰∫ÆËØ¥ÊòéÊ≠£Á°ÆËøõÂÖ•ÈîÆÁõò‰∏≠Êñ≠ÊúçÂä°Á®ãÂ
                             ∫è
                     220             
0159 755403          221             MOV KEYBUF1,#03H;
015C 755300          222             MOV KEYBUF2,#00H;
015F 75551E          223             MOV DEFAULTDT,#30;
                     224             
0162                 225         WAT4RLS:;WAITE FOR REALSE
0162 E5B0            226             MOV A,P3;
0164 540F            227             ANL A,#0FH;
0166 640F            228             XRL A,#0FH;
0168 70F8            229             JNZ WAT4RLS;
                     230     
                     231     
                     232             
016A C0D0            233             PUSH PSW;
016C C0E0            234             PUSH ACC;
016E D2D3            235             SETB RS0;USE THE SECOND SET OF REGISTERS;
0170 C28A            236             CLR IT1;
0172 7900            237             MOV R1,#0;R1Áî®‰ΩúÊ†áÂøóÔºåÁî®Êù•Ê†áËÆ∞Êï∞ÊçÆÂ∫îËØ•Â≠òÂÖ•Âì™‰∏™buf„ÄÇ
                     238     
                     239         
                     240     
                     241     
                     242     
                     243     
                     244     
                     245     
                     246     
                     247     
                     248         
0174                 249         KBSCNR1:
0174 75B0FF          250             MOV P3,#0FFH;
0177 C2B4            251             CLR P3.4;
0179 E5B0            252             MOV A,P3;
017B 540F            253             ANL A,#0FH;
017D 640F            254             XRL A,#0FH;
017F 6016            255             JZ KBSCNR2;
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 16:30:00 PAGE     5

                     256             
0181 51F9            257             CALL DELAY4KBD;
                     258     
0183 E5B0            259             MOV A,P3;
0185 540F            260             ANL A,#0FH;
0187 640F            261             XRL A,#0FH;
0189 600C            262             JZ KBSCNR2;
018B                 263         C11:
018B 00              264             NOP;
018C                 265         C12:
018C 00              266             NOP;
018D                 267         C13:
018D 00              268             NOP;
018E                 269         C14:
018E 00              270             NOP;
                     271         
018F                 272         WAT4RLS1:;WAITE FOR REALSE
018F E5B0            273             MOV A,P3;
0191 540F            274             ANL A,#0FH;
0193 640F            275             XRL A,#0FH;
0195 70F8            276             JNZ WAT4RLS1;
                     277     
0197                 278         KBSCNR2:
0197 75B0FF          279             MOV P3,#0FFH;
019A C2B5            280             CLR P3.5;
019C E5B0            281             MOV A,P3;
019E 540F            282             ANL A,#0FH;
01A0 640F            283             XRL A,#0FH;
01A2 6055            284             JZ KBSCNR3;
01A4 51F9            285             CALL DELAY4KBD;
                     286     
01A6 E5B0            287             MOV A,P3;
01A8 540F            288             ANL A,#0FH;
01AA 640F            289             XRL A,#0FH;
01AC 604B            290             JZ KBSCNR3;
                     291     
01AE                 292         C21:
01AE B40113          293             CJNE A,#01H,C22;0001Â∑¶‰∏äËßíË¢´Êåâ‰∏ã
                     294             
                     295     
                     296     
01B1 B90009          297             CJNE R1,#0,C21BUF2;
01B4 755407          298             MOV KEYBUF1,#07H;
01B7 B290            299             CPL P1.0;
01B9 7901            300             MOV R1,#1;
01BB 21F1            301             AJMP WAT4RLS2;
01BD                 302         C21BUF2:
01BD 755307          303             MOV KEYBUF2,#07H;
01C0 7900            304             MOV R1,#0;
01C2 21F1            305             AJMP WAT4RLS2;
01C4                 306         C22:
01C4 B40211          307             CJNE A,#02H,C23;
01C7 B90007          308             CJNE R1,#0,C22BUF2;
01CA 755404          309             MOV KEYBUF1,#04H;
01CD 7901            310             MOV R1,#1;
01CF 21F1            311             AJMP WAT4RLS2;
01D1                 312         C22BUF2:
01D1 755304          313             MOV KEYBUF2,#04H;
01D4 7900            314             MOV R1,#0;
01D6 21F1            315             AJMP WAT4RLS2;
01D8                 316         C23:
01D8 B40411          317             CJNE A,#04H,C24;
01DB B90007          318             CJNE R1,#0,C23BUF2;
01DE 755401          319             MOV KEYBUF1,#01H;
01E1 7901            320             MOV R1,#1;
01E3 21F1            321             AJMP WAT4RLS2;
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 16:30:00 PAGE     6

01E5                 322         C23BUF2:
01E5 755301          323             MOV KEYBUF2,#01H;
01E8 7900            324             MOV R1,#0;
01EA 21F1            325             AJMP WAT4RLS2;
01EC                 326         C24:
01EC B40802          327             CJNE A,#08H,WAT4RLS2;
                     328             ;MOV KEYBUF1,#0FFH;
01EF 41C7            329             AJMP EXITSET;
                     330     
01F1                 331         WAT4RLS2:;WAITE FOR REALSE
01F1 E5B0            332             MOV A,P3;
01F3 540F            333             ANL A,#0FH;
01F5 640F            334             XRL A,#0FH;
01F7 70F8            335             JNZ WAT4RLS2;
                     336     
                     337     
                     338     
                     339     
01F9                 340         KBSCNR3:
01F9 75B0FF          341             MOV P3,#0FFH;
01FC C2B6            342             CLR P3.6;
01FE E5B0            343             MOV A,P3;
0200 540F            344             ANL A,#0FH;
0202 640F            345             XRL A,#0FH;
0204 6060            346             JZ KBSCNR4;
0206 51F9            347             CALL DELAY4KBD;
                     348     
0208 E5B0            349             MOV A,P3;
020A 540F            350             ANL A,#0FH;
020C 640F            351             XRL A,#0FH;
020E 6056            352             JZ KBSCNR4;
                     353     
0210                 354         C31:
0210 B40111          355             CJNE A,#01H,C32;0001Â∑¶‰∏äËßíË¢´Êåâ‰∏ã
0213 B90007          356             CJNE R1,#0,C31BUF2;
0216 755408          357             MOV KEYBUF1,#08H;
0219 7901            358             MOV R1,#1;
021B 415E            359             AJMP WAT4RLS3;
021D                 360         C31BUF2:
021D 755308          361             MOV KEYBUF2,#08H;
0220 7900            362             MOV R1,#0;
0222 415E            363             AJMP WAT4RLS3;
0224                 364         C32:
0224 B40211          365             CJNE A,#02H,C33;
0227 B90007          366             CJNE R1,#0,C32BUF2;
022A 755405          367             MOV KEYBUF1,#05H;
022D 7901            368             MOV R1,#1;
022F 415E            369             AJMP WAT4RLS3;
0231                 370         C32BUF2:
0231 755305          371             MOV KEYBUF2,#05H;
0234 7900            372             MOV R1,#0;
0236 415E            373             AJMP WAT4RLS3;
0238                 374         C33:
0238 B40411          375             CJNE A,#04H,C34;
023B B90007          376             CJNE R1,#0,C33BUF2;
023E 755402          377             MOV KEYBUF1,#02H;
0241 7901            378             MOV R1,#1;
0243 415E            379             AJMP WAT4RLS3;
0245                 380         C33BUF2:
0245 755302          381             MOV KEYBUF2,#02H;
0248 7900            382             MOV R1,#0;
024A 415E            383             AJMP WAT4RLS3;
024C                 384         C34:
024C B408A2          385             CJNE A,#08H,WAT4RLS2;
024F B90007          386             CJNE R1,#0,C34BUF2;
0252 755400          387             MOV KEYBUF1,#00H;
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 16:30:00 PAGE     7

0255 7901            388             MOV R1,#1;
0257 415E            389             AJMP WAT4RLS3;
0259                 390         C34BUF2:
0259 755300          391             MOV KEYBUF2,#00H;
025C 7900            392             MOV R1,#0;
                     393     
025E                 394         WAT4RLS3:;WAITE FOR REALSE
025E E5B0            395             MOV A,P3;
0260 540F            396             ANL A,#0FH;
0262 640F            397             XRL A,#0FH;
0264 70F8            398             JNZ WAT4RLS3;
                     399     
0266                 400         KBSCNR4:
0266 75B0FF          401             MOV P3,#0FFH;
0269 C2B7            402             CLR P3.7;
026B E5B0            403             MOV A,P3;
026D 540F            404             ANL A,#0FH;
026F 640F            405             XRL A,#0FH;
0271 6052            406             JZ KBSCNEND;
0273 51F9            407             CALL DELAY4KBD;
                     408     
0275 E5B0            409             MOV A,P3;
0277 540F            410             ANL A,#0FH;
0279 640F            411             XRL A,#0FH;
027B 6048            412             JZ KBSCNEND;
                     413     
027D                 414         C41:
027D B40111          415             CJNE A,#01H,C42;0001Â∑¶‰∏äËßíË¢´Êåâ‰∏ã
0280 B90007          416             CJNE R1,#0,C41BUF2;
0283 755409          417             MOV KEYBUF1,#09H;
0286 7901            418             MOV R1,#1;
0288 41BD            419             AJMP WAT4RLS4;
028A                 420         C41BUF2:
028A 755309          421             MOV KEYBUF2,#09H;
028D 7900            422             MOV R1,#0;
028F 41BD            423             AJMP WAT4RLS4;
0291                 424         C42:
0291 B40211          425             CJNE A,#02H,C43;
0294 B90007          426             CJNE R1,#0,C42BUF2;
0297 755406          427             MOV KEYBUF1,#06H;
029A 7901            428             MOV R1,#1;
029C 41BD            429             AJMP WAT4RLS4;
029E                 430         C42BUF2:
029E 755306          431             MOV KEYBUF2,#06H;
02A1 7900            432             MOV R1,#0;
02A3 41BD            433             AJMP WAT4RLS4;
02A5                 434         C43:
02A5 B40411          435             CJNE A,#04H,C44;
02A8 B90007          436             CJNE R1,#0,C43BUF2;
02AB 755403          437             MOV KEYBUF1,#03H;
02AE 7901            438             MOV R1,#1;
02B0 41BD            439             AJMP WAT4RLS4;
02B2                 440         C43BUF2:
02B2 755303          441             MOV KEYBUF2,#03H;
02B5 7900            442             MOV R1,#0;
02B7 41BD            443             AJMP WAT4RLS4;
02B9                 444         C44:
02B9 B40801          445             CJNE A,#08H,WAT4RLS4;
02BC 00              446             NOP;
                     447     
02BD                 448         WAT4RLS4:;WAITE FOR REALSE
02BD E5B0            449             MOV A,P3;
02BF 540F            450             ANL A,#0FH;
02C1 640F            451             XRL A,#0FH;
02C3 70F8            452             JNZ WAT4RLS4;
                     453     
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 16:30:00 PAGE     8

                     454     
                     455     
02C5                 456         KBSCNEND:
                     457     
02C5 2174            458             AJMP KBSCNR1;
02C7                 459         EXITSET:
02C7 B297            460             CPL P1.7;
                     461             ;CPL P1.1;
                     462         
02C9                 463         WAT4EXIT:;WAITE FOR REALSE
02C9 E5B0            464             MOV A,P3;
02CB 540F            465             ANL A,#0FH;
02CD 640F            466             XRL A,#0FH;
02CF 70F8            467             JNZ WAT4EXIT;
                     468     
                     469             
                     470     
                     471     
                     472     
                     473     
02D1 E554            474             MOV A,KEYBUF1;
02D3 75F00A          475             MOV B,#10;
02D6 A4              476             MUL AB;
02D7 2553            477             ADD A,KEYBUF2;
02D9 F552            478             MOV KEYBUF3,A;
                     479     
02DB C2D3            480             CLR RS0;USE THE DEFAULT SET OF REGISTERS;
02DD D0E0            481             POP ACC;
02DF D0D0            482             POP PSW;
                     483     
02E1 855457          484             MOV OFFSET2,KEYBUF1;
                     485             
                     486     
                     487     
                     488     
                     489     
                     490     
02E4 AC53            491             MOV R4,KEYBUF2;
02E6 BC0005          492             CJNE R4,#00H,NDINC;
02E9 855255          493             MOV DEFAULTDT,KEYBUF3;
02EC 41F3            494             AJMP NDINCBK;
02EE                 495             NDINC:
                     496             ;MOV R5,KEYBUF3;
02EE 0557            497             INC OFFSET2;‰∏∫‰ªÄ‰πàË¶ÅÂä†1ÔºåÂõ†‰∏∫Â≠òÊîæÊï∞Á†ÅÁÆ°ÂØπÂ∫î16ËøõÂà∂ÁöÑË°®ÊúÄÂâçÈù¢Â§
                             öÂä†‰∫Ü‰∏Ä‰∏™00H;
02F0 855255          498             MOV DEFAULTDT,KEYBUF3;
02F3                 499             NDINCBK:
                     500     
02F3 D28A            501             SETB IT1;
02F5 75B00F          502             MOV P3,#0FH;
02F8 32              503             RETI;
                     504     
                     505     
02F9                 506         DELAY4KBD:
02F9 7E0A            507             MOV R6,#10
02FB                 508         D1:        
02FB 7FF8            509             MOV R7,#248
02FD DFFE            510             DJNZ R7,$
02FF DEFA            511             DJNZ R6,D1
0301 22              512             RET
                     513     
                     514     
                     515     
                     516     
                     517     
                     518     
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 16:30:00 PAGE     9

                     519     
0302                 520     PWNWAT: ;power on wait
0302 C0D0            521             PUSH PSW;
0304 C0E0            522             PUSH ACC;
0306 D2D3            523             SETB RS0;
0308 7928            524             MOV R1,#40;
030A 7A0A            525             MOV R2,#10;
030C                 526         PW1:
030C 00              527             NOP;
030D 00              528             NOP;
030E D9FC            529             DJNZ R1,PW1;
0310 7928            530             MOV R1,#40;
0312 DAF8            531             DJNZ R2,PW1;
0314 D0E0            532             POP ACC;
0316 D0D0            533             POP PSW;
0318 22              534             RET;
                     535     
                     536     
0319                 537     TIMETAB:
0319 003F065B        538         DB 00H,3FH,06H,5BH;
031D 4F666D7D        539         DB 4FH,66H,6DH,7DH;
0321 077F6F          540         DB 07H,7FH,6FH;
                     541         ;DB 6FH,7FH,07H,7DH;
                     542         ;DB 6DH,66H,4FH,5BH;
                     543         ;DB 06H,3FH;
                     544     END;
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 16:30:00 PAGE    10

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

ACC. . . . . . . .  D ADDR   00E0H   A   
ADJUST . . . . . .  C ADDR   00B6H   A   
ADJUST1. . . . . .  C ADDR   00BFH   A   
ADJUSTFLAG . . . .  N NUMB   0051H   A   
ASGTO. . . . . . .  C ADDR   00D2H   A   
B. . . . . . . . .  D ADDR   00F0H   A   
BAL1 . . . . . . .  C ADDR   0110H   A   
BAL2 . . . . . . .  C ADDR   012AH   A   
BAL3 . . . . . . .  C ADDR   0144H   A   
BALANCE. . . . . .  N NUMB   0056H   A   
BREAK. . . . . . .  C ADDR   0152H   A   
C11. . . . . . . .  C ADDR   018BH   A   
C12. . . . . . . .  C ADDR   018CH   A   
C13. . . . . . . .  C ADDR   018DH   A   
C14. . . . . . . .  C ADDR   018EH   A   
C21. . . . . . . .  C ADDR   01AEH   A   
C21BUF2. . . . . .  C ADDR   01BDH   A   
C22. . . . . . . .  C ADDR   01C4H   A   
C22BUF2. . . . . .  C ADDR   01D1H   A   
C23. . . . . . . .  C ADDR   01D8H   A   
C23BUF2. . . . . .  C ADDR   01E5H   A   
C24. . . . . . . .  C ADDR   01ECH   A   
C31. . . . . . . .  C ADDR   0210H   A   
C31BUF2. . . . . .  C ADDR   021DH   A   
C32. . . . . . . .  C ADDR   0224H   A   
C32BUF2. . . . . .  C ADDR   0231H   A   
C33. . . . . . . .  C ADDR   0238H   A   
C33BUF2. . . . . .  C ADDR   0245H   A   
C34. . . . . . . .  C ADDR   024CH   A   
C34BUF2. . . . . .  C ADDR   0259H   A   
C41. . . . . . . .  C ADDR   027DH   A   
C41BUF2. . . . . .  C ADDR   028AH   A   
C42. . . . . . . .  C ADDR   0291H   A   
C42BUF2. . . . . .  C ADDR   029EH   A   
C43. . . . . . . .  C ADDR   02A5H   A   
C43BUF2. . . . . .  C ADDR   02B2H   A   
C44. . . . . . . .  C ADDR   02B9H   A   
CFG. . . . . . . .  C ADDR   00CDH   A   
CMP4 . . . . . . .  C ADDR   00A2H   A   
D1 . . . . . . . .  C ADDR   02FBH   A   
DEF. . . . . . . .  C ADDR   0000H   A   
DEFAULTDT. . . . .  N NUMB   0055H   A   
DELAY. . . . . . .  C ADDR   00FAH   A   
DELAY1S. . . . . .  C ADDR   00D8H   A   
DELAY4KBD. . . . .  C ADDR   02F9H   A   
DELAY50MS. . . . .  C ADDR   00DEH   A   
EA . . . . . . . .  B ADDR   00A8H.7 A   
ET0. . . . . . . .  B ADDR   00A8H.1 A   
ET1. . . . . . . .  B ADDR   00A8H.3 A   
EX1. . . . . . . .  B ADDR   00A8H.2 A   
EXITSET. . . . . .  C ADDR   02C7H   A   
IT1. . . . . . . .  B ADDR   0088H.2 A   
KBSCN. . . . . . .  C ADDR   0157H   A   
KBSCNEND . . . . .  C ADDR   02C5H   A   
KBSCNR1. . . . . .  C ADDR   0174H   A   
KBSCNR2. . . . . .  C ADDR   0197H   A   
KBSCNR3. . . . . .  C ADDR   01F9H   A   
KBSCNR4. . . . . .  C ADDR   0266H   A   
KEYBUF1. . . . . .  N NUMB   0054H   A   
KEYBUF2. . . . . .  N NUMB   0053H   A   
A51 MACRO ASSEMBLER  PIRTEST                                                              10/31/2019 16:30:00 PAGE    11

KEYBUF3. . . . . .  N NUMB   0052H   A   
LIGHT. . . . . . .  C ADDR   00A5H   A   
LIGHTTIME. . . . .  C ADDR   00C3H   A   
LOOP . . . . . . .  C ADDR   007DH   A   
LOOPTAG. . . . . .  N NUMB   0060H   A   
LOOPTIME . . . . .  N NUMB   0059H   A   
MAIN . . . . . . .  C ADDR   0060H   A   
NDINC. . . . . . .  C ADDR   02EEH   A   
NDINCBK. . . . . .  C ADDR   02F3H   A   
NUMDIS . . . . . .  C ADDR   0109H   A   
OFFSET1. . . . . .  N NUMB   0058H   A   
OFFSET2. . . . . .  N NUMB   0057H   A   
P0 . . . . . . . .  D ADDR   0080H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
P3 . . . . . . . .  D ADDR   00B0H   A   
PSW. . . . . . . .  D ADDR   00D0H   A   
PW1. . . . . . . .  C ADDR   030CH   A   
PWNWAT . . . . . .  C ADDR   0302H   A   
PX1. . . . . . . .  B ADDR   00B8H.2 A   
RS0. . . . . . . .  B ADDR   00D0H.3 A   
SP . . . . . . . .  D ADDR   0081H   A   
TH0. . . . . . . .  D ADDR   008CH   A   
THT. . . . . . . .  N NUMB   00D8H   A   
TIMEOUT. . . . . .  C ADDR   00EDH   A   
TIMETAB. . . . . .  C ADDR   0319H   A   
TL0. . . . . . . .  D ADDR   008AH   A   
TLT. . . . . . . .  N NUMB   00F0H   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . .  B ADDR   0088H.4 A   
TR1. . . . . . . .  B ADDR   0088H.6 A   
WAT4EXIT . . . . .  C ADDR   02C9H   A   
WAT4RLS. . . . . .  C ADDR   0162H   A   
WAT4RLS1 . . . . .  C ADDR   018FH   A   
WAT4RLS2 . . . . .  C ADDR   01F1H   A   
WAT4RLS3 . . . . .  C ADDR   025EH   A   
WAT4RLS4 . . . . .  C ADDR   02BDH   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
